\subsubsection{Motoren}

Nach ersten Berechnungen für die Motoren wurde ein passender Motor ausgewählt, bestellt und anschliessend getestet. Entscheidende Faktoren bei der Auswahl waren das Drehmoment und die Betriebsspannung.

Der Test bestand darin, den Motor mit einer Pulsweitenmodulation (PWM) bei zwei unterschiedlichen Spannungen zu betreiben. Zunächst wurde der Motor mit einer Spannung von 5V getestet. Dabei wurde der Duty Cycle schrittweise erhöht, bis der Motor bei 58\% des Duty Cycles zu drehen begann. Nachdem der Motor angelaufen, konnte der Duty Cycle auf bis zu 44\% reduziert werden, bevor der Motor wieder stoppte.

In einer zweiten Testsequenz wurde die gleiche Vorgehensweise mit einer Spannung von 12V durchgeführt. Hier begann der Motor bei einem Duty Cycle von 33\% zu drehen. Beim schrittweisen Reduzieren der Einschaltzeit drehte der Motor bis zu einem Duty Cycle von 12\% weiter.

Da der Motor möglichst präzise gesteuert werden soll, ist eine feine Einstellung der Drehzahl erforderlich. Der Test zeigte jedoch, dass der Motor bei 5V nur verzögert anlief, was zu einer zu schnellen Drehbewegung führen könnte und die präzise Steuerung erschwert. Streuverluste sowie die Bauart des Motors erfordern einen höheren Anlaufstrom.

Um dennoch eine geringe Anfangsdrehzahl zu gewährleisten, wird der Motor initial mit 12V gestartet. Sobald der Motor angelaufen ist, wird die Spannung auf 5V reduzier, wodurch der Motor bei hohen Duty Cycle nicht Überlastet werdet.

\begin{table}[h!]
\centering
\begin{tabular}{|c|c|c|c|}
\hline
\textbf{Spannung} & \textbf{Einschaltzeit (Duty Cycle)} & \textbf{Ausschaltzeit (Duty Cycle)} \\ \hline
12V & 33\% & 12\% \\ \hline
5V  & 58\% & 44\% \\ \hline
\end{tabular}
\caption{Vergleich der Duty-Cycle-Werte bei 12V und 5V}
\label{tab:dutycycle}
\end{table}

\subsubsection{Tiny K22 Pinout}

Für die Hardwarenahe Steuerung und Regelung wurde ein Tiny K22 Version 1.4 nach dem Morphologischen Kasten (Verweis auf Morphologischen Kasten einfügen) bestummen. Für die Software und Hardware auslegung des Projektes ist eine Funktionsbestimmung der einzelnen Pins erforderlich.

Das Tiny K22 PCB stellt 28 Pins zu verfügung (Link zu Tiny Bild). Davon können die Pins zu Timer, ADC, IIC, SPI, UART, Input oder Outputpins umfunktioniert werden.

Für das Projket wurde die gesammte Pinbelegschaft verwendet (Link zu Pinoutbild). Die zeitkritischen Funktionen werden auf den Tiny K22 abgehandelt. Dazu gehören die Encoder auswertung, der Mikrokontroller hat einen eingebauten Quadraturencoderauswertung auf Timer1 und 2. Die Linienerfassung besetzt den gesammten Timer0. Die Motoren teilen sich Timer3 mit dem Ultraschallsensor, Buzzer und dem Servomotor, da es sonst keinen weiteren Platz hat. Das hat zu folge, dass die Motoren im Höhrbaren bereich betrieben werden. Dies ist Akzetabel, da keine Lautstärkelimite festgelegt würde.










